webpackJsonp([1],{"1uuo":function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),n=a("mvHQ"),o=a.n(n),r=a("mtWM"),l=a.n(r),c={name:"app",data:function(){return{createTaskFormVisible:!1,createTaskForm:{Url:"",FilePath:"",PartCount:void 0,addAble:!0},taskData:[]}},created:function(){},mounted:function(){var t=this;setInterval(function(){t.getTaskList()},500)},methods:{getTaskList:function(){var t=this;l.a.get("http://localhost:9988/task/get",{}).then(function(e){200===e.status&&(console.log(e.data),t.taskData=e.data)}).catch(function(t){console.log(t)})},createTask:function(){var t=this;t.addAble=!1;var e={PartCount:parseInt(this.createTaskForm.PartCount),FilePath:this.createTaskForm.FilePath,Url:this.createTaskForm.Url};parseInt(this.createTaskForm.PartCount),l.a.post("http://localhost:9988/task/create",o()(e)).then(function(e){200===e.status&&(t.getTaskList(),t.createTaskFormVisible=!1,t.addAble=!0,t.$message({type:"success",message:"新任务已加入下载队列!"}))}).catch(function(t){return t})},startTask:function(t){var e=this;l.a.post("http://localhost:9988/task/start",o()(t)).then(function(t){200===t.status&&e.$message({type:"success",message:"已开始下载!"})}).catch(function(){e.$message({type:"danger",message:"已开始下载或下载出错!"})})},stopTask:function(t){var e=this;l.a.post("http://localhost:9988/task/stop",o()(t)).then(function(t){console.log(200===t.status),200===t.status&&e.$message({type:"warning",message:"已暂停下载!"})}).catch(function(){e.$message({type:"danger",message:"已暂停!"})})},deleteTask:function(t){var e=this;e.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){l.a.post("http://localhost:9988/task/delete",o()(t)).then(function(t){200===t.status&&(e.getTaskList(),e.$message({type:"success",message:"删除成功!"}))}).catch(function(){e.$message({type:"error",message:"删除失败"})})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},startAllTask:function(){var t=this;l.a.post("http://localhost:9988/task/start_all").then(function(e){200===e.status&&t.$message({type:"success",message:"已全部开始下载!"})}).catch(function(t){return t})},stopAllTask:function(){var t=this;l.a.post("http://localhost:9988/task/stop_all").then(function(e){200===e.status&&t.$message({type:"warning",message:"已全部暂停下载!"})}).catch(function(t){return t})},onUrlChange:function(){var t=this;this.$nextTick(function(){console.log(t.createTaskForm.FileName),t.createTaskForm.FilePath=t.createTaskForm.Url.split("/").pop()})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app",onload:"loopGetTaskList()"}},[a("el-container",[a("el-header",[a("div",{staticStyle:{float:"left"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.createTaskFormVisible=!0}}},[t._v("添加"),a("i",{staticClass:"el-icon-plus el-icon--right"})]),t._v(" "),a("el-button",{attrs:{type:"success"},on:{click:t.startAllTask}},[t._v("全部开始")]),t._v(" "),a("el-button",{attrs:{type:"warning"},on:{click:t.stopAllTask}},[t._v("全部暂停")])],1)]),t._v(" "),a("el-main",[a("el-table",{attrs:{data:t.taskData,"default-sort":{prop:"Id",order:"descending"}}},[a("el-table-column",{attrs:{prop:"Id",sortable:"",label:"任务ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"FileName",label:"文件名称"}}),t._v(" "),a("el-table-column",{attrs:{sortable:"",label:"文件大小"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(Math.ceil(e.row.Size/1024/1024))+"MB\n                    ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"Speed",sortable:"",label:"下载速度"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.Speed/1024>1024?a("span",[t._v("\n                            "+t._s(Math.ceil(e.row.Speed/1024/1024))+"Mb/s\n                        ")]):a("span",[t._v("\n                            "+t._s(Math.ceil(e.row.Speed/1024))+"kb/s\n                        ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{sortable:"",label:"下载进度"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(e.row.Progress)+"%\n                    ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"已下载"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(Math.ceil(e.row.Downloaded/1024/1024))+"MB\n                    ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"success",icon:"el-icon-download",circle:""},on:{click:function(a){t.startTask(e.row.Id)}}}),t._v(" "),a("el-button",{attrs:{type:"warning",icon:"el-icon-sort",circle:""},on:{click:function(a){t.stopTask(e.row.Id)}}}),t._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){t.deleteTask(e.row.Id)}}})]}}])})],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"添加任务",visible:t.createTaskFormVisible},on:{"update:visible":function(e){t.createTaskFormVisible=e}}},[a("el-form",{attrs:{model:t.createTaskForm}},[a("el-form-item",{attrs:{label:"下载链接"}},[a("el-input",{attrs:{"auto-complete":"off"},on:{change:t.onUrlChange},model:{value:t.createTaskForm.Url,callback:function(e){t.$set(t.createTaskForm,"Url",e)},expression:"createTaskForm.Url"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"保存路径(默认路径在系统下载目录)"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.createTaskForm.FilePath,callback:function(e){t.$set(t.createTaskForm,"FilePath",e)},expression:"createTaskForm.FilePath"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"并发数"}},[a("el-select",{model:{value:t.createTaskForm.PartCount,callback:function(e){t.$set(t.createTaskForm,"PartCount",e)},expression:"createTaskForm.PartCount"}},[a("el-option",{attrs:{label:"1",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"2",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"4",value:"4"}}),t._v(" "),a("el-option",{attrs:{label:"8",value:"8"}}),t._v(" "),a("el-option",{attrs:{label:"16",value:"16"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.createTaskFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",disable:"addAble"},on:{click:t.createTask}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var u=a("VU/8")(c,i,!1,function(t){a("irlB")},null,null).exports,p=a("/ocq"),v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("h1",[t._v(t._s(t.msg))]),t._v(" "),a("h2",[t._v("Essential Links")]),t._v(" "),t._m(0),t._v(" "),a("h2",[t._v("Ecosystem")]),t._v(" "),t._m(1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",[a("li",[a("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[t._v("\n        Core Docs\n      ")])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank"}},[t._v("\n        Forum\n      ")])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank"}},[t._v("\n        Community Chat\n      ")])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank"}},[t._v("\n        Twitter\n      ")])]),t._v(" "),a("br"),t._v(" "),a("li",[a("a",{attrs:{href:"http://vuejs-templates.github.io/webpack/",target:"_blank"}},[t._v("\n        Docs for This Template\n      ")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("a",{attrs:{href:"http://router.vuejs.org/",target:"_blank"}},[this._v("\n        vue-router\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vuex.vuejs.org/",target:"_blank"}},[this._v("\n        vuex\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vue-loader.vuejs.org/",target:"_blank"}},[this._v("\n        vue-loader\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank"}},[this._v("\n        awesome-vue\n      ")])])])}]};var f=a("VU/8")({name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}}},v,!1,function(t){a("1uuo")},"data-v-d8ec41bc",null).exports;s.default.use(p.a);var h=new p.a({routes:[{path:"/",name:"HelloWorld",component:f}]}),m=a("zL8q"),_=a.n(m);a("tvR6");s.default.use(_.a),s.default.config.productionTip=!1,new s.default({el:"#app",router:h,components:{App:u},template:"<App/>"})},irlB:function(t,e){},tvR6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.7893af6ecf087af92ad9.js.map